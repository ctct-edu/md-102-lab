# ラボ 0801: Autopilot を使用した Windows の展開



## 概要



このラボでは、ユーザー駆動型モードを使用して Autopilot を使用して Windows 11 デバイスをプロビジョニングする方法について説明します。

### 前提 条件



このラボの前に、次のラボを完了する必要があります。

- 0101 - Entra IDでのアイデンティティの管理
- 0102 - Entra Connect を使用した ID の同期

### シナリオ



Contoso IT は、Autopilot を使用して新しい Windows 11 デバイスの展開を展開することを計画しています。デバイスには、Windows 11 のデフォルト インストールがあります。ユーザーは、Entra ID 資格情報を使用してサインインし、OOBE 中にデバイスを接続し、電源を入れ、最小限の質問に答えることができる必要があります。このプロセスでは、Entra ID ドメインが自動的に登録され、参加されます。エクスペリエンスの構成とテストを求められました。

### タスク1: Entra IDでのグループの作成



1. ブラウザー のアドレス バーに「**[https://entra.microsoft.com](https://entra.microsoft.com/)**」と入力し、**Enter キー**を押します。プロンプトが表示されたら、**`Admin@yourtenant.onmicrosoft.com`** と既定のテナント パスワードを使用してサインインします。

4. ナビゲーションペインで、[**Entra ID**] を展開します。

5. [**グループ]** を選択し、[**すべてのグループ**] を選択します。

6. **グループ内 |すべてのグループ** ブレードで、 [**新しいグループ**] を選択します。

7. [**新しいグループ**] ブレードの [**グループの種類**] ボックスの一覧で、 **[セキュリティ]** を選択します。

8. [**グループ名**] ボックスに「**IT Devices」**と入力します。

9. **[グループの説明**] ボックスに「**IT Department Devices**」と入力します。

10. [**メンバーシップタイプ]** リストで、[**動的デバイス]** を選択します。

11. [**動的クエリの追加**] を選択します。

12. [**動的メンバーシップ ルール]** ブレードで、[**ルール構文]** ボックスの上にある **[編集**] を選択します。

13. [ルール構文の編集] テキスト ボックスに、次の単純なメンバーシップ ルールを追加し、[**OK]** を選択します。

    ```
    (device.devicePhysicalIDs -any (_ -contains "[ZTDId]"))
    ```

    

14. **保存 ** を選択して動的メンバーシップ ルールを閉じ、**作成** を選択してグループを作成します。

### タスク2: デバイス固有のカンマ区切り値(CSV)ファイルの生成

1. **SEA-WS3** に切り替え、**Pa55w.rd** のパスワードで**Admin **としてサインインします。

2. **[Start]** を右クリックし、[**Windows Terminal (Admin)]** を選択し、[**User Account Control**] プロンプトで [**Yes**] を選択します。

3. Windows PowerShell コマンド ライン プロンプトで、次のコマンドレットを入力し、**Enter キー**を押します。

   ```
   Install-Script -Name Get-WindowsAutoPilotInfo
   ```

   

4. 3つのプロンプトが表示されます。毎回「**Y**」と入力し、**Enter キー**を押します。

5. Windows PowerShell コマンド ライン プロンプトで、次のコマンドレットを入力し、**Enter キー**を押します。

   ```
   Set-ExecutionPolicy -ExecutionPolicy RemoteSigned
   ```

   

6. Windows PowerShell コマンド ライン プロンプトで、次のコマンドレットを入力し、**Enter キー**を押します。

   ```
   Get-WindowsAutoPilotInfo.ps1 -OutputFile C:\Computer.csv
   ```

   

7. Windows PowerShell コマンド ライン プロンプトで、次のコマンドを入力し、**Enter キー**を押して、ファイルの内容を確認します。

   ```
   type C:\Computer.csv
   ```

   

8. **Windows Terminal** を閉じます。

### タスク 3: Windows Autopilot 展開プロファイルの操作



1. **SEA-WS3** の Windows タスクバーで、[**Microsoft Edge**] を選択します。

2. **Microsoft Edge** で、[**[https://intune.microsoft.com](https://intune.microsoft.com/)**] に移動します。**`Admin@yourtenant.onmicrosoft.com`** アカウントでサインインします。

   > 注: MFA の登録を求められる場合があります。コースの前半で使用したのと同じ手順に従って、電話番号を追加します。

3. **Microsoft Intune管理センター**で、[**デバイス]** を選択します。

4. [**デバイスのオンボーディング**] セクションで、[**登録]** を選択します。

5. [**Windows**] タブで、[**Windows Autopilot**] まで下にスクロールし、[**デバイス]** を選択します。

6. メニュー バーの **[Windows Autopilot デバイス**] ブレードで、[**インポート]** を選択し、**フォルダー アイコン**を選択して **[C:\] を参照し、[Computer.csv]、[Open]、[インポート]の順に選択** します。

   *注: インポート プロセスには最大 15 分かかる場合がありますが、通常は約 5 分かかります。*

   ***重要**: プロセスが完了すると、デバイスが自動的に表示されない場合があります。この場合は、[**最新の情報に更新]** ボタンを選択します。それでもデバイスが表示されない場合は、[**同期]** ボタンを選択し、数分待ってから **[更新]** を選択します。*

7. [**X**] を選択して **[Windows Autopilot デバイス**] ブレードを閉じます。

8. [Windows 登録] ブレードの詳細ウィンドウで、 **[デプロイ プロファイル**] を選択します。

9. [**Windows AutoPilot 展開プロファイル]** ブレードで、 [**+ プロファイルの作成**] を選択し、 [**Windows PC**] を選択します。

10. [**基本]** タブの [**名前**] テキスト ボックスに「**Contoso profile1**」と入力します。

11. **[すべての対象 デバイスを Autopilot に変換する]** で [**いいえ**] を選択し、 [**次へ**] を選択します。

12. [**アウトオブボックス エクスペリエンス (OOBE)]** タブで、[**配置モード**] が [**ユーザードリブン]** に設定されていることを確認します。

13. **[次のように Microsoft Entra ID に参加] が** **[Microsoft Entra 参加済み] に設定されていることを確認します**。

14. 次のオプションが設定されていることを確認します。

    - マイクロソフト ソフトウェア ライセンス条項: **非表示にする**
    - プライバシーの設定: **非表示にする**
    - アカウント変更オプションを非表示にする: **非表示にする**
    - ユーザーアカウントの種類: **管理者**
    - 事前プロビジョニングされたデプロイを許可する: **いいえ**
    - 言語 (リージョン): **オペレーティング システムの既定値**
    - キーボードを自動的に構成する: **はい**
    - デバイス名のテンプレートを適用する: **いいえ**

15. [**次へ**] を選択します。

16. [**割り当て]** タブの **[組み込まれたグループ]** で **[グループの追加**] を選択します。

17. **[IT Devices]** グループを選択し、[**選択]** をクリックします。[**次へ**] を選択します。

18. [**確認および作成**] タブで、情報を確認し、[**作成]** を選択します。

19. **Microsoft Edge** を閉じる

### タスク 4: PC をリセットする

1. **SEA-WS3** で、[**Start]** を選択し、「**reset **」と入力して **[Reset this PC]** を選択します。

2. [**System > Recovery**] ページで、[**Reset PC]** を選択します。

3. **[Remove everything]** を選択し、[**Local reinstall]** を選択します。

4. [**Next **] を選択し、[**Reset]** を選択します。

   > 注: 通常、このタスクは、物理デバイスの新しい展開には必要ありません。デバイスの自動操縦情報は、製造元によって提供されるか、OOBE の前にデバイスから取得できます。このラボでは、新しいデバイス OOBE をシミュレートするためにリセットを開始する必要があります。

   > 注: このプロセスには 30 分から 45 分かかる場合があり、プロセス中に数回再起動します。

### タスク5: Autopilotデプロイメントの検証



1. [**職場または学校用に設定しましょう**] ページで、「**`Aaron@yourtenant.onmicrosoft.com`**」と入力し、[**次へ**] を選択します。

2. [パスワード] ページで、「**Pa55w.rd1234!」**と入力し、[**サインイン]** を選択します。

3. [**アカウントで Windows Hello を使用する**] で、[**OK]** を選択します。

4. [**本人確認**] ページで、[テキスト検証方法] を選択します。

5. **[コードの入力**] ページで、モバイル デバイスにテキストで送信されたコードを入力し、[**確認]** を選択します。

6. **PIN のセットアップ** ダイアログ ボックスの **新しい PIN** フィールドと **PIN の確認** フィールドに「**102938**」と入力し、**OK** を選択します。

7. **[すべての設定]** ページで、[**OK]** を選択します。

8. [**スタート]** を選択し、[**設定]** を選択します。

9. **[アカウント]** を選択し、 [**職場または学校へのアクセス**] を選択します。デバイスが Contoso の Azure AD に接続されていることを確認します。

10. **[Contoso の Azure AD に接続]** を選択し、 [**情報**] を選択します。

11. [**Contoso による管理]** ページで、下にスクロールして **[同期]** を選択します。

12. **SEA-WS3** では、[**設定**] ウィンドウを閉じます。

13. **SEA-SVR1** に切り替えます。

14. Microsoft Entra 管理センターで、[**Entra ID]**、[**デバイス]** の順に展開し、[**すべてのデバイス**] を選択します。

    > 新しいデバイスには、Autopilot デバイスを示すアイコンが表示されます。また、結合の種類は、所有者として Aaron Nicholls が参加した **Microsoft Entra** であることに注意してください。

15. Autopilot デバイスを選択し、[**管理]** を選択します。

16. デバイスの廃止、ワイプ、同期、再起動ができることに注意してください。

17. メニュー バーの最後にある省略記号を選択し、追加の管理機能に注目してください。

    > その他の機能には、フレッシュスタート、オートパイロットリセット、クイックスキャン、フルスキャンなどがあります。

18. Microsoft Edge を閉じます。

**結果**: この演習を完了すると、ユーザー駆動モードを使用して Autopilot を使用して Windows デバイスをプロビジョニングします。

**ラボの終わり**
