# ラボ 0301: 構成プロファイルの作成と展開



## 概要



このラボでは、Microsoft Intune を使用して、Windows 11 デバイスの構成プロファイルを作成して適用します。

### 前提 条件



このラボの前に、次のラボを完了する必要があります。

- 0101 - Entra IDでのアイデンティティの管理

- 0102 - Entra Connect を使用した ID の同期

- 0203-Intuneへのデバイス登録の管理

- 0204-Intune へのデバイスの登録

  > 注: Entra ID への Windows Hello サインイン認証をセキュリティで保護するために使用されるテキスト メッセージを受信できる携帯電話も必要です。

## 演習 1: 構成プロファイルを作成して適用する



### シナリオ



Entra と Intune を使用して、Contoso の開発者部門のメンバーを管理する必要があります。ユーザーが Windows 11 デバイスで効果的かつ安全に作業できるようにするソリューションを評価するよう求められています。Aaron Nicholls は、ソリューションのテストと評価、フィードバックの提供をボランティアで支援しています。また、開発者の Windows デバイスに含めて適用する必要がある初期要件もいくつか示しました。

- [設定] の [ゲーム] セクションは表示されません。
- 設定のプライバシーセクションは、可能な限り制限する必要があります。
- C:\DevProjects フォルダーは、Windows Defender から除外する必要があります。
- プロセスdevbuild.exeは、Windows Defender から除外する必要があります。
- 最も使用されているアプリと最近追加したアプリは、[スタート] メニューに表示されません。

### タスク 1: デバイス設定を確認する



1. PIN **102938**を使用して **Aaron Nicholls** として **SEA-WS1** にサインインします。
2. タスク バーで、[**スタート]** を選択し、[**設定]** を選択します。
3. [**設定**] ナビゲーション リストで、[**ゲーム]** 設定が表示されることを確認します。
4. 個人**用設定**を選択し、個人用設定 ページで **開始** を選択します。[**最近追加したアプリを表示する**] と [**最も使用したアプリを表示する**] の両方が **[オン**] に設定されていることを確認します。
5. **設定**アプリで、[**プライバシーとセキュリティ]** を選択します。
6. [**プライバシーとセキュリティ]** ページで、[**セキュリティ**] セクション、[**Windows アクセス許可**] セクション、**および [アプリのアクセス許可**] セクションで使用可能なオプションをメモします。
7. [**プライバシーとセキュリティ**] ページで、[**Windows セキュリティ**] を選択し、[**Windows セキュリティを開く]** を選択します。
8. [**Windows セキュリティ**] ページで、[**ウイルスと脅威の防止**] を選択します。
9. [**ウイルスと脅威の防止**] ページの [**ウイルスと脅威の防止の設定**] で、[**設定の管理]** を選択します。
10. [**除外**] まで下にスクロールし、[**除外の追加または削除]** を選択します。[ユーザー アカウント制御] で、[**はい**] を選択します。
11. [**除外**] ページで、除外が構成されていないことを確認します。
12. **[Windows セキュリティ**] ウィンドウを閉じます。
13. **[設定**]ウィンドウを閉じます。

### タスク2: シナリオ要件に基づく構成プロファイルの作成



1. **SEA-SVR1** に切り替えます。
2. **SEA-SVR1** のタスク バーで、[**Microsoft Edge]** を選択します。
3. Microsoft Edge で、アドレス バーに「**[https://intune.microsoft.com](https://intune.microsoft.com/)**」と入力し、**Enter キー**を押します。
4. テナント管理者パスワードを使用して **`admin@yourtenant.onmicrosoft.com`** としてサインインします。
5. Microsoft Intune管理センターで、ナビゲーション バーから **[デバイス]** を選択します。
6. [**デバイス]** ページの [**デバイスの管理]** セクションで、[**構成]** を選択します。
7. **デバイス上 |構成**ブレードの詳細ウィンドウで、 **[+ 作成]** を選択し、 [**+ 新しいポリシー**] を選択します。
8. [**プロファイルの作成**] ブレードで、次のオプションを選択し、 **[作成]** を選択します。
   - プラットフォーム: **Windows 10 以降**
   - プロファイルタイプ: **テンプレート**
   - テンプレート名: **デバイス制限**
9. **基本** タブで、次の情報を入力し、**次へ** を選択します。

- 名前: **Contoso Developer - standard**
- 説明: **Contoso 開発者向けの基本的な制限と構成。**

1. [**構成設定**] タブで、[**コントロール パネルと設定**] を展開します。

2. [**ゲーム]** と **[プライバシー**] オプションの横にある **[ブロック]** を選択します。

3. **[デバイスの制限**] タブで、[**スタート]** を展開します。

4. 下にスクロールして、[**最もよく使用されるアプリ**]、[**最近追加したアプリ**]、[**ジャンプ リストで最近開いたアイテム**] の横にある **[ブロック**] を選択します。

5. [**デバイスの制限**] タブで、下にスクロールして **[Microsoft Defender ウイルス対策**] を展開します。

6. [**Microsoft Defender ウイルス対策**] で、下にスクロールして [**Microsoft Defender ウイルス対策の除外**] を展開します。

7. [**ファイルとフォルダー]** ボックスの **[Microsoft Defender ウイルス対策の除外**] で、次のように入力します。

   **C:\DevProjects**です。

8. [**プロセス]** ボックスに、次のように入力します。**DevBuild.exe**。

9. [**確認 + 作成**] ブレードに到達するまで、 **[次へ**] を 3 回選択します。**[作成]** を選択します。

### タスク 3: Contoso Developer デバイス グループを作成する



1. Microsoft Intune管理センターのナビゲーション ウィンドウで、[**グループ]** を選択します。
2. **グループ |すべてのグループ** ブレードで、 [**新しいグループ**] を選択します。
3. [**新しいグループ**] ブレードで、次の情報を入力します。

- グループの種類: **セキュリティ**
- グループ名: **Contoso Developer devices**
- グループの説明: **Contoso 開発者部門のすべての Windows デバイス**
- メンバーシップの種類: **割り当て済み**

1. **[メンバー]** で、[**メンバーが選択されていません**] を選択します。
2. [**メンバーの追加**] ブレードの [**検索]** ボックスに「**Sea**」と入力します。[**SEA-WS1**] を選択し、[**選択]** を選択します。
3. [**新しいグループ**] ブレードで、 **[作成]** を選択します。
4. **グループ |[すべてのグループ**] ブレードで、**Contoso の開発者デバイス** グループが表示されていることを確認します。

### タスク4: 動的Entra IDデバイス・グループの作成



1. **グループ |[すべてのグループ]** ブレードの詳細ウィンドウで、 [**新しいグループ**] を選択します。
2. [**グループ**] ブレードで、次の値を指定します。
   - グループの種類: **セキュリティ**
   - グループ名: **Windows デバイス**
   - メンバーシップタイプ:**動的デバイス**
3. [**動的デバイス メンバー]** セクションで、[**動的クエリの追加**] を選択します。
4. [**動的メンバーシップ ルール]** ブレードの **[ルール構文]** セクションで、 **[編集]** を選択します。
5. **[ルール構文の編集]** テキスト ボックスに、次の単純なメンバーシップ ルールを追加し、[**OK]** を選択します。

```
(device.deviceOSType -contains "Windows")
```



1. [**動的メンバーシップ ルール]** ブレードで、 [**保存]** を選択します。
2. 新しい**グループ** ページで、**作成** を選択します。

### タスク5: Windowsデバイスへの構成プロファイルの割り当て



1. Microsoft Intune管理センターのナビゲーション ウィンドウで、[**デバイス]** を選択します。
2. [**デバイス]** ブレードの **[デバイスの管理]** セクションで、 **[構成]** を選択します。
3. **デバイス上 |[構成**] ブレードの詳細ウィンドウで、**Contoso Developer – standard** プロファイルを選択します。
4. **[Contoso Developer – standard**] ブレードで、[**割り当て]** セクションまで下にスクロールし、 **[編集]** を選択します。
5. [割り当て] ページの **[含まれるグループ]** で **[グループの追加**] を選択します。
6. [**含めるグループの選択]** ブレードの [**検索**] ボックスで、 **[Contoso Developer デバイス**] を選択し、[**選択]** を選択します。
7. [**デバイスの制限**] ブレードに戻り、 [**確認 + 保存**] を選択し、 [**保存]** を選択します。
8. Microsoft Intune管理センターで、階層リンク ナビゲーション メニューの **[デバイス]** を選択します。

### タスク6: 構成プロファイルが適用されていることを確認する



1. **SEA-WS1** に切り替えます。
2. **SEA-WS1** のタスクバーで、[**スタート**]、[**設定]** の順に選択します。
3. **[設定]** で **[アカウント]** を選択し、[**職場または学校へのアクセス**] を選択します。
4. [**職場または学校へのアクセス**] セクションで、 **[Contoso の Azure AD に接続されている]** リンクを選択し、 [**情報**] を選択します。
5. [**Contoso による管理]** ページで、下にスクロールし、 [デバイス同期の状態] で **[同期]** を選択します。同期が完了するまで待ちます。
6. 同期が完了したら、**設定**アプリを閉じます。
7. **SEA-WS1** で、[**スタート]** を選択し、[**設定]** を選択します。**[ゲーム]** 設定が削除されていることを確認します。
8. **[プライバシーとセキュリティ]** を選択すると、プライバシー設定の多くが非表示になっていることがわかります。
9. [**個人用設定]** を選択し、[**開始]** を選択します。[**最近追加したアプリを表示する**] と [**最も使用したアプリを表示する**] が **[オフ]** に設定されていることを確認します。
10. **設定**アプリで、[**プライバシーとセキュリティ]** を選択します。
11. [**プライバシーとセキュリティ**] ページで、[**Windows セキュリティ**] を選択し、[**Windows セキュリティを開く]** を選択します。
12. [**Windows セキュリティ**] ページで、[**ウイルスと脅威の防止**] を選択します。
13. [**ウイルスと脅威の防止**] ページで、[**ウイルスと脅威の防止設定**] の [**設定の管理**] を選択します。
14. [**除外**] まで下にスクロールし、[**除外の追加または削除]** を選択します。[ユーザー アカウント制御] メッセージで [**はい**] を選択します。
15. [**除外**] ページで、**C:\DevProjects** と **DevBuild.exe** が表示されていることを確認します。
16. **Windows セキュリティ** ページを閉じてから、**設定**アプリを閉じます。

**結果**: この演習を完了すると、Windows 11 デバイスの構成プロファイルが正常に作成され、割り当てられます。

## 演習 2: 割り当てられた構成プロファイル ポリシーを変更する



### シナリオ



Contoso のポリシーには、開発者部門のメンバーがデバイスの [設定] で [プライバシー] オプションをブロックしてはならないと指定する例外がありました。この変更は実装され、テストされる必要があります。

### タスク 1: 割り当てられた構成プロファイルの設定を変更する



1. **SEA-SVR1** に切り替えます。
2. **SEA-SVR1** の Microsoft Intune 管理センターで **[デバイス]** を選択し、[**デバイスの管理]** セクションで **[構成]** を選択します。
3. **デバイス上 |構成**ブレードの詳細ウィンドウで、 **[Contoso Developer - standard**] を選択します。
4. **[Contoso Developer - standard**] ブレードで、[**構成設定**] セクションまで下にスクロールし、[**編集]** を選択します。
5. [**デバイスの制限**] ページで、[**コントロール パネルと設定]** を展開します。
6. [**プライバシー]** の横にある [**未構成]** を選択します。
7. [**確認 + 保存**] を選択し、 [**保存]** を選択します。

### タスク 2: Intune Manager 管理センターからのデバイス同期を強制する



1. **SEA-SVR1** では、Microsoft Intune管理センターで、ナビゲーション ウィンドウで **[デバイス]** を選択し、[**すべてのデバイス**] を選択します。

2. 詳細ペインで、[**SEA-WS1**] を選択します。

3. [**SEA-WS1**] ブレードで **[同期]** を選択し、プロンプトが表示されたら [**はい**] を選択します。

   *注: Intune はデバイスに接続し、すべてのポリシーを同期するように指示します。これには最大 5 分かかる場合があります。*

4. Microsoft Edge を閉じます。

### タスク 3: SEA-WS1 の変更の確認



1. **SEA-WS1** に切り替えます。
2. **SEA-WS1** とタスク バーで、[**スタート]** を選択し、[**設定**] アプリを選択します。
3. **設定**アプリで、[**プライバシーとセキュリティ]** を選択し、すべてのカスタマイズ オプションが戻っていることを確認します。
4. 開いているすべてのウィンドウを閉じて、**SEA-WS1** からサインアウトします。

**結果**: この演習を完了すると、割り当てられた構成プロファイルを変更し、構成プロファイルを変更し、変更を検証できます。

**ラボの終わり**
